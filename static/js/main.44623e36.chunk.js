(this.webpackJsonpmesto=this.webpackJsonpmesto||[]).push([[0],{18:function(e,t,a){e.exports=a.p+"static/media/mesto-logo.c6f11019.svg"},20:function(e,t,a){e.exports=a.p+"static/media/Auth-ok.e38b395c.svg"},21:function(e,t,a){e.exports=a.p+"static/media/Auth-err.4072126c.svg"},26:function(e,t,a){e.exports=a(37)},31:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),c=a.n(o),i=a(7),l=(a(31),a(24)),s=a(1),u=a(2),m=a(18),p=a.n(m);var f=function(e){var t="".concat(e.isToggle?"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f":"\u0412\u043e\u0439\u0442\u0438"),a="".concat(e.isToggle?"/signup":"/signin"),n="".concat(!e.loggedIn&&"header__link_hidden");return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"header"},r.a.createElement("img",{className:"header__logo",src:e.logo,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f-\u041c\u0435\u0441\u0442\u043e"}),r.a.createElement("ul",{className:"header__info"},r.a.createElement("li",{className:"header__list"},r.a.createElement(i.b,{className:"header__link",to:e.loggedIn?"/":a,onClick:function(){e.changeAuth()}},e.loggedIn?e.user:t)),r.a.createElement("li",{className:"header__list"},r.a.createElement(i.b,{className:"header__link header__link_gray ".concat(n),to:"/signin",onClick:function(){e.close(),localStorage.removeItem("jwt")}},"\u0412\u044b\u0439\u0442\u0438")))))};var d=function(e){var t=r.a.useState(!1),a=Object(s.a)(t,2),n=a[0],o=a[1],c=e.card.owner._id===e.currentUser._id,i="element__trash ".concat(c?"":"element__trash_hidden"),l=e.card.likes.some((function(t){return t._id===e.currentUser._id})),u="element__button ".concat(l?"element__button_like-active":""),m="".concat(n&&"element__button_hidden"),p="".concat(n?"\u0423\u043f\u0441, \u043e\u0448\u0438\u0431\u043a\u0430...":"".concat(e.card.name)),f="element__count ".concat(n&&"element__count_hidden");return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"element"},r.a.createElement("img",{className:"element__image",alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",src:e.card.link,onClick:function(t){!n&&e.onCardClick(e.card)},onError:function(e){e.target.setAttribute("src","https://image.freepik.com/free-vector/404_115790-50.jpg"),o(!0)}})," ",r.a.createElement("div",{className:"element__places"},r.a.createElement("h2",{className:"element__place"},p),r.a.createElement("div",{className:"element__likes"},r.a.createElement("button",{className:"".concat(u," ").concat(m),type:"button",onClick:function(){e.onCardLike(e.card)}}),r.a.createElement("span",{className:f}," ",e.card.likes.length>0?"".concat(e.card.likes.length):0," "))),r.a.createElement("button",{className:i,type:"button",onClick:function(t){e.onTrashClick(e.card,t.target.parentElement)}})))},_=r.a.createContext();var h=function(e){var t=r.a.useContext(_);return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"content"},r.a.createElement("section",{className:"profile"},r.a.createElement("div",{className:"profile__cover"},r.a.createElement("div",{className:"profile__information"},r.a.createElement("figure",{className:"profile__background",onClick:e.onEditAvatar})," ",r.a.createElement("img",{className:"profile__avatar",src:t.avatar,alt:t.name})),r.a.createElement("div",{className:"profile__info"},r.a.createElement("div",{className:"profile__reg"},r.a.createElement("h1",{className:"profile__author"},t.name),r.a.createElement("button",{className:"profile__button-edit",type:"button",onClick:e.onEditProfile})," "),r.a.createElement("p",{className:"profile__specialty"},t.about))),r.a.createElement("button",{className:"profile__button-add",type:"button",onClick:e.onAddPlace})," "),r.a.createElement("section",{className:"elements"}," ",e.cards.map((function(a){return r.a.createElement(d,{card:a,key:a._id,onCardClick:e.onCardClick,currentUser:t,onCardLike:e.onCardLike,onTrashClick:e.onTrashClick})})))))};var g=function(e){var t=r.a.useState(""),a=Object(s.a)(t,2),n=a[0],o=a[1],c=r.a.useState(""),l=Object(s.a)(c,2),u=l[0],m=l[1];return r.a.createElement("section",{className:"register"},r.a.createElement("form",{className:"register__form",onSubmit:function(t){t.preventDefault(),e.onSignUp(n,u)}},r.a.createElement("h2",{className:"register__text"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("fieldset",{className:"register__auth"},r.a.createElement("input",{className:"register__input",id:"login",placeholder:"Email",type:"email",name:"email",onChange:function(e){return o(e.target.value)}}),r.a.createElement("span",{className:"register__input-error",id:"login-input-error"},"123"),r.a.createElement("input",{className:"register__input",id:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",name:"password",onChange:function(e){return m(e.target.value)}}),r.a.createElement("span",{className:"register__input-error",id:"password-input-error"},"123")),r.a.createElement("button",{className:"register__btn-submit",type:"submit"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),r.a.createElement("p",{className:"register__have-auth"},"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",r.a.createElement(i.b,{className:"register__enter",to:!e.isError&&"/signin",onClick:function(){e.changeAuth()}},"\u0412\u043e\u0439\u0442\u0438"))))},E="https://api.cucmber.students.nomoreparties.co",v="popup-container__infoform_type_error",b="popup-container__input-error_active";var C=function(e){var t=r.a.useState(""),a=Object(s.a)(t,2),n=a[0],o=a[1],c=r.a.useState(""),l=Object(s.a)(c,2),u=l[0],m=l[1];return r.a.createElement("section",{className:"register"},r.a.createElement("form",{className:"register__form",onSubmit:function(t){t.preventDefault(),e.onSignIn(n,u)}},r.a.createElement("h2",{className:"register__text"},"\u0412\u0445\u043e\u0434"),r.a.createElement("fieldset",{className:"register__auth"},r.a.createElement("input",{className:"register__input",id:"login",placeholder:"Email",type:"email",onChange:function(e){return o(e.target.value)}}),r.a.createElement("span",{className:"register__input-error",id:"login-input-error"},"123"),r.a.createElement("input",{className:"register__input",id:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",onChange:function(e){return m(e.target.value)}}),r.a.createElement("span",{className:"register__input-error",id:"password-input-error"},"123")),r.a.createElement("button",{className:"register__btn-submit",type:"submit"},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement("p",{className:"register__have-auth"},"\u0415\u0449\u0451 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",r.a.createElement(i.b,{className:"register__enter",to:"/signup",onClick:function(){e.changeAuth()}},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))))},k=a(25),N=function(e){var t=e.component,a=Object(k.a)(e,["component"]);return r.a.createElement(u.b,null,(function(){return a.loggedIn?r.a.createElement(t,a):r.a.createElement(u.a,{to:"./signin"})}))};var y=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"popup popup__".concat(e.name," ").concat(e.isOpen&&"popup_opened"),onClick:e.overlayClick},r.a.createElement("form",{className:"popup-container popup-container__".concat(e.name),name:"form",method:"POST",action:"#",onSubmit:e.onSubmit,noValidate:!0},r.a.createElement("h2",{className:"popup-container__text"},e.title),r.a.createElement("fieldset",{className:"popup-container__info"},e.children,r.a.createElement("button",{className:"popup-container__button-add ".concat(e.isButtonDisable||void 0===e.isButtonDisable?"":"popup-container__button-add_error"),type:"submit",disabled:!e.isButtonDisable&&void 0!==e.isButtonDisable},e.buttonText)),r.a.createElement("button",{className:"popup-container__button-reset",type:"reset","aria-label":"Close",onClick:e.onClose}))))};var j=function(e){var t=r.a.useContext(_),a=r.a.useState(""),n=Object(s.a)(a,2),o=n[0],c=n[1],i=r.a.useState(""),l=Object(s.a)(i,2),u=l[0],m=l[1],p=r.a.useState({formErrors:{author:"",job:""},authorValid:!0,jobValid:!0,formValid:!0}),f=Object(s.a)(p,2),d=f[0],h=f[1];function g(e,t){var a=d.formErrors,n=d.authorValid,r=d.jobValid;d.formValid;switch(t){case"author":n=e.validity.valid,a.author=n?"":e.validationMessage;break;case"job":r=e.validity.valid,a.job=r?"":e.validationMessage}h({formErrors:a,authorValid:n,jobValid:r,formValid:n&&r})}r.a.useEffect((function(){c(t.name),m(t.about)}),[t]);var E="".concat(e.isText?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c");return r.a.createElement(y,{overlayClick:function(t){e.overlay(t.target)},onSubmit:function(t){t.preventDefault(),e.onChangeText(),e.onUpdateUser({name:o,about:u})},title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"edit-form",buttonText:E,isButtonDisable:d.formValid,isOpen:e.isOpen,onClose:function(){e.onClose(),c(t.name),m(t.about),h({formErrors:{author:"",job:""},authorValid:!0,jobValid:!0,formValid:!0})},children:r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{className:"popup-container__infoform popup-container__infoform_author ".concat(!d.authorValid&&v),id:"author",name:"author",type:"text",placeholder:"\u0410\u0432\u0442\u043e\u0440",defaultValue:o,minLength:"2",maxLength:"40",pattern:"[A-Za-z\u0410-\u042f\u0401\u0430-\u044f\u0451 -]{1,}",required:!0,onChange:function(e){c(e.target.value),g(e.target,e.target.name)}}),r.a.createElement("span",{className:"popup-container__input-error ".concat(!d.authorValid&&b),id:"author-input-error"},d.formErrors.author),r.a.createElement("input",{className:"popup-container__infoform popup-container__infoform_author ".concat(!d.jobValid&&v),id:"job",name:"job",type:"text",defaultValue:u,placeholder:"\u041e \u0441\u0435\u0431\u0435",minLength:"2",maxLength:"200",required:!0,onChange:function(e){m(e.target.value),g(e.target,e.target.name)}}),r.a.createElement("span",{className:"popup-container__input-error ".concat(!d.jobValid&&b),id:"job-input-error"},d.formErrors.job))})};var O=function(e){var t=r.a.useRef(),a=r.a.useState({formError:"",avatar:!1,form:!1}),n=Object(s.a)(a,2),o=n[0],c=n[1],i="".concat(e.isText?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c");return r.a.createElement(y,{isButtonDisable:o.form,overlayClick:function(t){e.overlay(t.target)},onSubmit:function(a){a.preventDefault(),e.onChangeText(),e.onUpdateAvatar(a.target,{avatar:t.current.value})},title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",defaultValue:"",name:"avatar",buttonText:i,isOpen:e.isOpen,onClose:function(){e.onClose()},children:r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{className:"popup-container__infoform popup-container__infoform_avatar-link ".concat(!o.avatar&&v),id:"avatar-input",ref:t,onChange:function(e){!function(e,t){var a=o.avatar,n=(o.form,o.formError);a=e.validity.valid,n=a?"":e.validationMessage,c({formError:n,avatar:a,form:a})}(e.target,e.target.name)},name:"avatar",type:"url",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443",required:!0}),r.a.createElement("span",{className:"popup-container__input-error"},o.formError))})};var S=function(e){var t=r.a.useRef(),a=r.a.useRef(),n=r.a.useState({formErrors:{name:"",link:""},nameValid:!1,linkValid:!1,formValid:!1}),o=Object(s.a)(n,2),c=o[0],i=o[1];function l(e){e.target===t.current?u(t.current,t.current.name):u(a.current,a.current.name)}function u(e,t){var a=c.formErrors,n=c.nameValid,r=c.linkValid;c.formValid;switch(t){case"name":n=e.validity.valid,a.name=n?"":e.validationMessage;break;case"link":r=e.validity.valid,a.link=r?"":e.validationMessage}i({formErrors:a,nameValid:n,linkValid:r,formValid:n&&r})}var m="".concat(e.isText?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c");return r.a.createElement(y,{isButtonDisable:c.formValid,overlayClick:function(t){e.overlay(t.target)},onSubmit:function(n){n.preventDefault(),e.onChangeText(),e.onAddPlace(n.target,{name:t.current.value,link:a.current.value}),i({formErrors:{name:"",link:""},nameValid:!1,linkValid:!1,formValid:!1})},title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"add-place",buttonText:m,isOpen:e.isOpen,onClose:function(){e.onClose(),i({formErrors:{name:"",link:""},nameValid:!1,linkValid:!1,formValid:!1})},children:r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{className:"popup-container__infoform popup-container__infoform_place-name ".concat(!c.nameValid&&v),id:"place-input",defaultValue:"",name:"name",type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",minLength:"1",maxLength:"30",ref:t,onChange:l,required:!0}),r.a.createElement("span",{className:"popup-container__input-error ".concat(!c.nameValid&&b),id:"place-input-error"},c.formErrors.name),r.a.createElement("input",{className:"popup-container__infoform popup-container__infoform_place-link ".concat(!c.linkValid&&v),id:"link-input",defaultValue:"",name:"link",type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",ref:a,onChange:l,required:!0}),r.a.createElement("span",{className:"popup-container__input-error ".concat(!c.linkValid&&b)},c.formErrors.link))})};var T=function(e){var t="".concat(e.isText?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0414\u0430");return r.a.createElement(y,{overlayClick:function(t){e.overlay(t.target)},onSubmit:function(t){t.preventDefault(),e.onChangeText(),e.onCardDelete(e.cardId)},isOpen:e.isOpen,onClose:e.onClose,title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"verification",buttonText:t,isText:e.isText})};var V=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"popup popup__show-image ".concat(e.isOpen&&"popup_opened"),onClick:function(t){e.overlay(t.target)}},r.a.createElement("figure",{className:"popup-image"},r.a.createElement("img",{className:"popup-image__picture",src:e.card.link,alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430"}),r.a.createElement("figcaption",{className:"popup-image__caption"},e.card.name),r.a.createElement("button",{className:"popup-container__button-reset popup-container__button-reset_image",type:"reset","aria-label":"Close",onClick:e.onClose}))))},x=a(20),w=a.n(x),I=a(21),A=a.n(I);var U=function(e){var t="".concat(e.isEnter?"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.":"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"),a="".concat(e.isEnter?A.a:w.a);return r.a.createElement("section",{className:"popup ".concat(e.isOpen&&"popup_opened")},r.a.createElement("figure",{className:"popup-auth"},r.a.createElement("img",{className:"popup-auth__picture",src:a,alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}),r.a.createElement("figcaption",{className:"popup-auth__caption"},t),r.a.createElement("button",{className:"popup-container__button-reset popup-container__button-reset_image",type:"reset","aria-label":"Close",onClick:e.onClose})))};var D=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Mesto Russia")))},P=a(22),L=a(23),B=new(function(){function e(t){var a=t.baseUrl;Object(P.a)(this,e),this._baseUrl=a}return Object(L.a)(e,[{key:"_fetch",value:function(e,t){return t.headers={authorization:"f137b98e-3f11-4f62-a4b2-d83c32e82337","Content-Type":"application/json"},fetch(this._baseUrl+e,t).then((function(e){return e.ok?e.json():Promise.reject(e.status)}))}},{key:"getInitialCards",value:function(e){return this._fetch(e,{method:"GET"})}},{key:"getUserInterface",value:function(e){return this._fetch(e,{method:"GET"})}},{key:"sendUserInfo",value:function(e,t){return this._fetch(e,{method:"PATCH",body:JSON.stringify({name:"".concat(t.name),about:"".concat(t.about)})})}},{key:"sendPlaceCard",value:function(e,t){return this._fetch(e,{method:"POST",body:JSON.stringify({name:"".concat(t.name),link:"".concat(t.link)})})}},{key:"changeLikeCardStatus",value:function(e,t){return t?this._fetch(e,{method:"DELETE"}):this._fetch(e,{method:"PUT"})}},{key:"deleteCard",value:function(e){return this._fetch(e,{method:"DELETE"})}},{key:"changeAvatar",value:function(e,t){return this._fetch(e,{method:"PATCH",body:JSON.stringify({avatar:"".concat(t.avatar)})})}}]),e}())({baseUrl:"https://api.cucmber.students.nomoreparties.co"});var F=function(){var e=r.a.useState(!1),t=Object(s.a)(e,2),a=t[0],n=t[1],o=r.a.useState(!1),c=Object(s.a)(o,2),i=c[0],m=c[1],d=r.a.useState(!1),v=Object(s.a)(d,2),b=v[0],k=v[1],y=r.a.useState({state:!1,cardId:"",elem:{}}),x=Object(s.a)(y,2),w=x[0],I=x[1],A=r.a.useState(!1),P=Object(s.a)(A,2),L=P[0],F=P[1],J=r.a.useState({}),M=Object(s.a)(J,2),q=M[0],R=M[1],z=r.a.useState(!1),G=Object(s.a)(z,2),H=G[0],W=G[1],Z=r.a.useState(!1),$=Object(s.a)(Z,2),K=$[0],Q=$[1],X=r.a.useState(!1),Y=Object(s.a)(X,2),ee=Y[0],te=Y[1],ae=r.a.useState(""),ne=Object(s.a)(ae,2),re=ne[0],oe=ne[1],ce=Object(u.g)(),ie=r.a.useState(!0),le=Object(s.a)(ie,2),se=le[0],ue=le[1],me=r.a.useState(!1),pe=Object(s.a)(me,2),fe=pe[0],de=pe[1],_e=r.a.useState({}),he=Object(s.a)(_e,2),ge=he[0],Ee=he[1],ve=r.a.useState([]),be=Object(s.a)(ve,2),Ce=be[0],ke=be[1];function Ne(){ue(!se)}function ye(){W(!0)}function je(){k(!1),n(!1),m(!1),F(!1),Q(!1),I({state:!1,cardId:"",elem:{}})}function Oe(e){e.classList.contains("popup")&&je()}return r.a.useEffect((function(){B.getUserInterface("/users/me").then((function(e){Ee(e)})).catch((function(e){console.log("\u0423\u043f\u0441, \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))})),B.getInitialCards("/cards").then((function(e){ke(e)})).catch((function(e){console.log("\u0423\u043f\u0441, \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}),[]),r.a.useEffect((function(){window.addEventListener("keydown",(function(e){"Escape"===e.key&&je()}))}),[]),r.a.useEffect((function(){!function(){if(localStorage.getItem("jwt")){var e=localStorage.getItem("jwt");(t=e,fetch("".concat(E,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){try{if(200===e.status)return e.json();if(401===e.status)return console.log("\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043d\u0435 \u0432 \u0442\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435")}catch(t){return t}return e})).then((function(e){return e}))).then((function(e){e&&(te(!0),ce.push("/"),oe("".concat(e.data.email)))})).catch((function(e){console.log("\u0423\u043f\u0441, \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}var t}()}),[ee]),r.a.createElement("div",{className:"page"},r.a.createElement(_.Provider,{value:ge},r.a.createElement(f,{logo:p.a,loggedIn:ee,user:re,close:function(){te(!1)},changeAuth:Ne,isToggle:se}),r.a.createElement(u.d,null,r.a.createElement(N,{exact:!0,path:"/",loggedIn:ee,component:h,onEditProfile:function(){n(!0)},onAddPlace:function(){m(!0)},onEditAvatar:function(){k(!0)},onCardClick:function(e){F(!0),R(e)},onTrashClick:function(e,t){I({state:!0,cardId:"".concat(e._id),elem:t})},cards:Ce,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===ge._id}));B.changeLikeCardStatus("/cards/likes/".concat(e._id),t).then((function(t){var a=Ce.map((function(a){return a._id===e._id?t:a}));ke(a)})).catch((function(e){console.log("\u0423\u043f\u0441, \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}}),r.a.createElement(u.b,{path:"/signup"},r.a.createElement(g,{changeAuth:Ne,onSignUp:function(e,t){(function(e,t){return fetch("".concat(E,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){try{if(200===e.status)return e.json()}catch(t){return t}return e})).then((function(e){return e}))})(e,t).then((function(e){e.ok?(Q(!0),de(!1),ce.push("/signin")):(Q(!0),de(!0))})).catch((function(e){Q(!0),de(!0),console.log("\u0423\u043f\u0441, \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))},isError:fe})),r.a.createElement(u.b,{path:"/signin"},r.a.createElement(C,{changeAuth:Ne,onSignIn:function(e,t){(function(e,t){return fetch("".concat(E,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){try{if(200===e.status)return e.json()}catch(t){return t}return e})).then((function(e){return localStorage.setItem("jwt",e.token),e}))})(e,t).then((function(e){e.token?te(!0):(Q(!0),de(!0))})).catch((function(e){console.log("\u0423\u043f\u0441, \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}})),r.a.createElement(u.b,null,ee?r.a.createElement(u.a,{to:"/"}):r.a.createElement(u.a,{to:"/signup"}))),r.a.createElement(U,{isEnter:fe,onClose:je,isOpen:K}),r.a.createElement(j,{overlay:Oe,isText:H,onChangeText:ye,isOpen:a,onClose:je,onUpdateUser:function(e){B.sendUserInfo("/users/me",e).then((function(e){Ee(e),je()})).catch((function(e){console.log("\u0423\u043f\u0441, \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))})).finally((function(){W(!1)}))}}),r.a.createElement(S,{overlay:Oe,isText:H,onChangeText:ye,isOpen:i,onClose:je,onAddPlace:function(e,t){B.sendPlaceCard("/cards",t).then((function(e){ke([].concat(Object(l.a)(Ce),[e])),je()})).catch((function(e){console.log("\u0423\u043f\u0441, \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))})).finally((function(){e.reset(),W(!1)}))}}),r.a.createElement(O,{overlay:Oe,isText:H,onChangeText:ye,isOpen:b,onClose:je,onUpdateAvatar:function(e,t){B.changeAvatar("/users/me/avatar",t).then((function(e){Ee(e),je()})).catch((function(e){console.log("\u0423\u043f\u0441, \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))})).finally((function(){e.reset(),W(!1)}))}}),r.a.createElement(T,{overlay:Oe,isText:H,onChangeText:ye,cardId:w.cardId,isOpen:w.state,onClose:je,onCardDelete:function(e){B.deleteCard("/cards/".concat(e)).then((function(e){w.elem.remove();var t=Ce.filter((function(t){return t._id!==e._id}));ke(t),je()})).catch((function(e){console.log("\u0423\u043f\u0441, \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))})).finally((function(){W(!1)}))}}),r.a.createElement(V,{overlay:Oe,card:q,isOpen:L,onClose:je}),r.a.createElement(D,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,null,r.a.createElement(F,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.44623e36.chunk.js.map